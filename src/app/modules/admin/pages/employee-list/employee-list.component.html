

<div class="bg-white p-6 md:p-8 rounded-xl shadow-lg border">

  <div class="max-w-7xl mx-auto">
    <h1 class="text-3xl font-extrabold text-gray-800 mb-4">Gestión de Personal</h1>

    <button pButton label="Registrar Nuevo" icon="pi pi-user-plus"
      class="mb-6 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg"
      (click)="router.navigate(['/admin/registrar-nuevo'])"></button>

    @if (errorMessage) {
    <div class="p-4 mb-4 text-red-600 bg-red-100 rounded-md border border-red-400">Error: {{ errorMessage }}</div>
    }

    <!-- Filtros y Búsqueda -->
    <div class="mb-6 grid grid-cols-1 md:grid-cols-3 gap-4">
      <div class="md:col-span-2">
        <p-floatlabel variant="on">   
        <p-iconfield >
          <p-inputicon styleClass="pi pi-search" />
          <input pInputText type="text" class="w-full"
          (input)="onSearch($event)">
          
        </p-iconfield>
        <label for="Buscar">Buscar por nombre, cargo o usuario</label>
      </p-floatlabel>
      </div>
  
      <div>
        <p-multiSelect [options]="roles" placeholder="Filtrar por Rol" optionLabel="name" styleClass="w-full"
          (onChange)="onFilterByRole($event)"></p-multiSelect>
      </div>
    </div>

    <!-- Estado de Carga -->
    @if (isLoading) {
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      @for (item of [1,2,3,4,5,6]; track item) {
      <div class="bg-white p-5 rounded-lg shadow-md border border-gray-200">
        <p-skeleton height="2rem" styleClass="mb-2"></p-skeleton>
        <p-skeleton width="10rem" styleClass="mb-4"></p-skeleton>
        <p-skeleton styleClass="mb-2"></p-skeleton>
        <p-skeleton styleClass="mb-4"></p-skeleton>
        <div class="flex justify-between">
          <p-skeleton width="4rem" height="2rem"></p-skeleton>
          <p-skeleton width="6rem" height="2.5rem"></p-skeleton>
        </div>
      </div>
      }
    </div>
    }

    <!-- Lista de Empleados en Tarjetas -->
    @if (!isLoading && employees.length > 0) {
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      @for (emp of employees; track emp.employeeCode) {
      <div
        class="bg-white p-5 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 border border-gray-200 flex flex-col justify-between">
        <div>
          <h3 class="text-xl font-bold text-gray-800">{{ emp.fullName }}</h3>
          <p class="text-gray-600 mb-3">{{ emp.position }}</p>
          <div class="text-sm text-gray-500 mb-4">
            <p>Código: <span class="font-medium text-gray-700">{{ emp.employeeCode }}</span></p>
            <p>Usuario: <span class="font-medium text-gray-700">{{ emp.username }}</span></p>
          </div>
        </div>
        <div class="flex justify-between items-center mt-4">
          <p-tag [value]="emp.roleDisplay"
            [severity]="emp.roleName === 'ROLE_ADMIN' ? 'danger' : (emp.roleName === 'ROLE_RRHH' ? 'warning' : 'info')"></p-tag>
          <button pButton icon="pi pi-pencil" label="Editar" class="p-button-sm p-button-info"
            pTooltip="Editar"></button>
        </div>
      </div>
      }
    </div>
    }

    <!-- Mensaje si no hay empleados -->
    @if (!isLoading && employees.length === 0) {
    <div class="text-center py-10 px-4 bg-white rounded-lg shadow-md">
      <i class="pi pi-users text-4xl text-gray-400 mb-3"></i>
      <p class="text-lg text-gray-600">No se encontraron empleados.</p>
      <p class="text-gray-500">Intenta ajustar los filtros o registra un nuevo empleado.</p>
    </div>
    }
  </div>
</div>
