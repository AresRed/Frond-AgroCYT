<div class="card shadow-xl rounded-lg bg-white p-6 lg:p-8 mt-4 space-y-8">
    <div class="max-w-7xl mx-auto">
        <h1 class="text-3xl font-extrabold text-gray-800 mb-6 border-b-2 border-green-500 pb-2">Mis Certificados</h1>
        <p class="text-gray-600 mb-8">Aquí puedes acceder a todos tus documentos oficiales de empleo, formación y diplomas.</p>

        <p-table [value]="certificates" 
             [paginator]="true" 
             [rows]="10" 
             [loading]="isLoading"
             styleClass="p-datatable-gridlines p-datatable-striped shadow-xl mt-6">
            
            <ng-template pTemplate="header">
                <tr>
                    <th class="w-1/12">ID</th>
                    <th>Título del Documento</th>
                    <th class="w-1/6">Tipo</th>
                    <th class="w-1/6">Fecha de Emisión</th>
                    <th class="w-1/6">Fecha de Caducidad</th>
                    <th class="w-20 text-center">Descargar</th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-cert>
                <tr>
                    <td class="font-bold">{{ cert.id }}</td>
                    <td class="font-medium text-gray-800">{{ cert.title }}</td>
                    
                    <td>
                        <p-tag [value]="cert.type | titlecase" 
                          [severity]="getSeverity(cert.type)">
                        </p-tag>
                    </td>
                    
                    <td class="text-sm text-gray-600">{{ cert.issueDate }}</td>
                    
                    <td class="text-sm">
                        <ng-container *ngIf="cert.expiryDate; else noExpiry">
                            <span [ngClass]="{'text-red-500 font-medium': isExpired(cert.expiryDate)}">
                                {{ cert.expiryDate }}
                                <i *ngIf="isExpired(cert.expiryDate)" class="pi pi-exclamation-triangle text-red-500 ml-1" title="Certificado expirado"></i>
                            </span>
                        </ng-container>
                        <ng-template #noExpiry>
                            <span class="text-gray-400">Permanente</span>
                        </ng-template>
                    </td>
                    
                    <td class="text-center">
                        <p-button icon="pi pi-download" 
                                  (onClick)="downloadCertificate(cert)" 
                                  styleClass="p-button-sm p-button-text p-button-success" 
                                  title="Descargar PDF">
                        </p-button>
                    </td>
                </tr>
            </ng-template>

            <ng-template pTemplate="emptymessage">
                <tr><td colspan="6" class="text-center py-4 text-gray-500">No tienes certificados disponibles en este momento.</td></tr>
            </ng-template>
        </p-table>
        
    </div>
</div>
